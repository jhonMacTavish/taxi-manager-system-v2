<template>
  <div class="container">
    <el-row :gutter="20">
      <el-col :span="8">
        <div class="echart-box">
          <el-card>
            <div class="dashbd-box" ref="containerDashbd"></div>
          </el-card>
          <el-card>
            <div class="pool-box" ref="containerPoolT1"></div>
            <div class="pool-box" ref="containerPoolT2"></div>
          </el-card>
        </div>
      </el-col>
      <el-col :span="8">
        <div class="echart-box">
          <el-card>
            <div class="road-box" ref="containerOnroad"></div>
          </el-card>
          <el-card style="position: relative; top: 2px">
            <template #header>
              <el-text class="mx-1" type="warning" size="large">放行通知</el-text>
            </template>
            <div class="release-box">
              <el-text v-if="releaseStatus.complete" type="success" class="info-releaseStatus">
                放车已完成
              </el-text>
              <div v-else class="info-release-complete">
                <h3>
                  <el-text>{{ releaseStatus.terminal }}</el-text>
                  <el-text type="primary">
                    {{
      releaseStatus.type == "long" ? "长途" : "短途"
    }}</el-text>
                  <el-text> 放车 </el-text>
                  <el-text type="success">{{ releaseStatus.total }}</el-text>
                  <el-text> 辆</el-text>
                </h3>
                <h4>
                  <el-text>已放</el-text>
                  <el-text type="success"> {{ releaseStatus.out }}</el-text>
                  <el-text> 辆，待放</el-text>
                  <el-text type="danger"> {{ releaseStatus.in }}</el-text>
                  <el-text> 辆</el-text>
                </h4>
                <h4>
                  <el-text>开始时间：</el-text>
                  <el-text type="warning">{{
      releaseStatus.startTime
    }}</el-text>
                </h4>
              </div>
            </div>
          </el-card>
          <el-card>
            <template #header>
              <el-text size="large" type="primary"> 确认通知 </el-text>
            </template>
            <div class="button-box-confirm">
              <el-button :disabled="btnDisabled || !func_no.includes('2')" @click="confirmBatch"
                type="primary">确认通知</el-button>
              <el-button
                :disabled="btnDisabled == false ? !btnDisabled : releaseStatus.complete || !func_no.includes('2')"
                @click="endBatch" type="primary">放车完成</el-button>
            </div>
          </el-card>
        </div>
      </el-col>
      <el-col :span="8">
        <div class="echart-box">
          <el-card class="terminl-box">
            <div ref="containerTermnl" class="echart-panle"></div>
          </el-card>
          <el-card class="passcheck-box">
            <template #header>
              <el-text size="large" type="primary"> 通行证状态 </el-text>
            </template>
            <div class="table-box">
              <el-table :data="tableData" stripe height="230px">
                <el-table-column prop="NOTE" label="道闸名称" />
                <el-table-column prop="VALUE" label="有效期" width="160" />
                <!-- <el-table-column prop="grant" label="通行证授权类型" /> -->
              </el-table>
            </div>
          </el-card>
        </div>
      </el-col>
    </el-row>
    <audio controls="controls" hidden :src="audioSource" ref="audio"></audio>
  </div>
</template>

<script setup>
import * as echarts from "echarts";
import axios from "axios";
import { actionVoice, numVoice } from "../util/voice.js";
import Connector from "../util/connector.js";
import {
  ref,
  reactive,
  onMounted,
  computed,
  watch,
  onBeforeUnmount,
} from "vue";
let echartT1Pool = null;
let echartT2Pool = null;
let echartDashbd = null;
let echartOnroad = null;
let echartTermnl = null;
let audioParams = {
  terminal: "T1",
  type: "long",
  num: 0,
};
let timer = null;

const func_no = ref([]);
const audio = ref();
const btnDisabled = ref(true);
const taxiData = reactive({
  pool: {
    T1: { max: 300, num: 0 },
    T2: { max: 700, num: 0 },
  },
  onRoad: {
    T1: { long: 0, pd: 0 },
    T2: { long: 0, pd: 0 },
  },
  terminal: {
    T1: {
      long: { line1: 0, line2: 0 },
      pd: { line1: 0 },
    },
    T2: {
      long: { line1: 0, line2: 0 },
      pd: { line1: 0 },
    },
  },
  pd: {
    T1: { max: 20, num: 0 },
    T2: { max: 20, num: 0 },
  },
});
const taxiDataComputed = computed(() => {
  console.log("----------------------", taxiData);
  return {
    poolTotal: taxiData.pool.T1.num + taxiData.pool.T2.num,
    poolT1Remaining:
      taxiData.pool.T1.max - taxiData.pool.T1.num >= 0
        ? taxiData.pool.T1.max - taxiData.pool.T1.num
        : 0,
    poolT2Remaining:
      taxiData.pool.T2.max - taxiData.pool.T2.num >= 0
        ? taxiData.pool.T2.max - taxiData.pool.T2.num
        : 0,
    onWayTotal:
      taxiData.onRoad.T1.long +
      taxiData.onRoad.T1.pd +
      taxiData.onRoad.T2.long +
      taxiData.onRoad.T2.pd,
  };
});

const containerPoolT1 = ref();
const containerPoolT2 = ref();
const containerDashbd = ref();
const containerOnroad = ref();
const containerTermnl = ref();
const audioSource = ref();

const optionPoolT1 = {
  title: {
    text: "蓄车场",
    top: "0",
  },
  tooltip: {
    trigger: "axis",
    axisPointer: {
      type: "shadow",
    },
  },
  legend: {},
  grid: {
    top: "45%",
    left: "3%",
    right: "4%",
    height: 70,
    containLabel: true,
  },
  xAxis: {
    type: "value",
    boundaryGap: [0, 0.01],
    max: taxiData.pool.T1.max,
    axisLabel: {
      fontSize: 15,
      fontWeight: "bold",
    },
  },
  yAxis: {
    type: "category",
    data: ["T1"],
    inverse: true,
    axisLabel: {
      fontSize: 15,
      fontWeight: "bold",
    },
  },
  series: [
    {
      name: "现存车辆",
      type: "bar",
      stack: "total",
      label: {
        show: true,
      },
      emphasis: {
        focus: "series",
      },
      data: [0],
    },
    {
      name: "剩余车位",
      type: "bar",
      stack: "total",
      label: {
        show: false,
      },
      emphasis: {
        focus: "series",
      },
      data: [0],
    },
  ],
};
const optionPoolT2 = {
  tooltip: {
    trigger: "axis",
    axisPointer: {
      type: "shadow",
    },
  },
  legend: {},
  grid: {
    top: "30%",
    left: "3%",
    right: "4%",
    height: 70,
    containLabel: true,
  },
  xAxis: {
    type: "value",
    boundaryGap: [0, 0.01],
    max: taxiData.pool.T2.max,
    axisLabel: {
      fontSize: 15,
      fontWeight: "bold",
    },
  },
  yAxis: {
    type: "category",
    data: ["T2"],
    inverse: true,
    axisLabel: {
      fontSize: 15,
      fontWeight: "bold",
    },
  },
  series: [
    {
      type: "bar",
      stack: "total",
      label: {
        show: true,
      },
      emphasis: {
        focus: "series",
      },
      data: [0],
    },
    {
      type: "bar",
      stack: "total",
      label: {
        show: false,
      },
      emphasis: {
        focus: "series",
      },
      data: [0],
    },
  ],
};
const optionDashbd = {
  title: {
    text: "蓄车场车辆",
  },
  grid: {
    top: "10%",
  },
  series: [
    {
      type: "gauge",
      detail: {
        formatter: "{value} 辆",
        offsetCenter: [0, 0],
        color: "#0099FF",
        fontSize: "38px",
      },
      data: [
        {
          value: 0,
        },
      ],
      center: ["50%", "65%"],
      radius: "80%",
      startAngle: 210,
      endAngle: -30,
      clockwise: true,
      min: 0,
      max: 1000,
      splitNumber: 10,
      progress: {
        show: true,
        width: 20,
        itemStyle: {
          color: "#0099CC",
        },
      },
      axisLine: {
        show: true,
        lineStyle: {
          width: 20,
        },
      },
      splitLine: {
        show: true,
        distance: -43,
        length: 15,
      },
      axisTick: {
        show: true,
        distance: -35,
        length: 8,
      },
      axisLabel: {
        distance: -10,
        fontSize: 18,
        padding: [-10, -35, -10, -35],
        fontWeight: "bold",
      },
      pointer: {
        show: false,
      },
    },
    {
      type: "gauge",
      detail: {
        show: false,
      },
      data: [
        {
          value: 0,
        },
      ],
      center: ["50%", "65%"],
      radius: "80%",
      startAngle: 210,
      endAngle: -30,
      min: 0,
      max: 1000,
      progress: {
        show: true,
        width: 10,
        itemStyle: {
          color: "#FF6666",
        },
      },
      axisLine: {
        show: false,
      },
      splitLine: {
        show: false,
      },
      axisTick: {
        show: false,
      },
      axisLabel: {
        show: false,
      },
      pointer: {
        show: false,
      },
    },
  ],
};
const optionOnroad = {
  title: {
    text: "路途车辆" + ": " + taxiDataComputed.value.onWayTotal + "辆",
  },
  grid: {
    top: "10%",
    left: "10%",
    right: "5%",
    bottom: "10%",
  },
  xAxis: {
    type: "category",
    splitLine: { show: false },
    offset: 12,
    data: [
      {
        value: "T1长途",
        textStyle: {
          fontSize: 15,
          fontWeight: "bolder",
        },
      },
      {
        value: "T1补偿",
        textStyle: {
          fontSize: 15,
          fontWeight: "bolder",
        },
      },
      {
        value: "T2长途",
        textStyle: {
          fontSize: 15,
          fontWeight: "bolder",
        },
      },
      {
        value: "T2补偿",
        textStyle: {
          fontSize: 15,
          fontWeight: "bolder",
        },
      },
    ],
  },
  yAxis: {
    type: "value",
    max: 50,
    axisLabel: {
      fontSize: 15,
      fontWeight: "bold",
    },
  },
  series: [
    {
      name: "数量",
      type: "bar",
      label: {
        show: true,
        position: "inside",
      },
      barWidth: 50,
      data: [0, 0, 0, 0],
    },
  ],
};
const optionTermnl = {
  title: {
    text: "航站楼车辆",
  },
  animation: false, //取消初始动画
  tooltip: {
    trigger: "axis",
    axisPointer: {
      type: "shadow",
    },
  },
  grid: {
    // containLabel: true,
    top: "10%",
    left: "25%",
    right: "5%",
    bottom: "10%",
  },
  yAxis: {
    data: ["T1长途1", "T1长途2", "T1长途3", "T2长途1", "T2长途2", "T2补偿"],
    inverse: true,
    axisLine: { show: false },
    axisTick: { show: false },
    axisLabel: {
      margin: 30,
      fontSize: 15,
      fontWeight: "bold",
    },
    axisPointer: {
      label: {
        show: true,
        margin: 30,
      },
    },
  },
  xAxis: {
    type: "value",
    max: 50,
    splitLine: { show: false },
    offset: 12,
    axisLabel: {
      fontSize: 15,
      fontWeight: "bold",
    },
  },
  series: [
    {
      name: "现存车辆",
      type: "pictorialBar",
      label: {
        show: true,
        position: "right",
        // offset: [10, 0],
        fontSize: 15,
      },
      symbolRepeat: true,
      symbolSize: ["80%", "60%"],
      barCategoryGap: "40%",
      data: [
        {
          value: 0,
          symbol:
            "path://M49.592,40.883c-0.053,0.354-0.139,0.697-0.268,0.963c-0.232,0.475-0.455,0.519-1.334,0.475 c-1.135-0.053-2.764,0-4.484,0.068c0,0.476,0.018,0.697,0.018,0.697c0.111,1.299,0.697,1.342,0.931,1.342h3.7 c0.326,0,0.628,0,0.861-0.154c0.301-0.196,0.43-0.772,0.543-1.78c0.017-0.146,0.025-0.336,0.033-0.56v-0.01 c0-0.068,0.008-0.154,0.008-0.25V41.58l0,0C49.6,41.348,49.6,41.09,49.592,40.883L49.592,40.883z M6.057,40.883 c0.053,0.354,0.137,0.697,0.268,0.963c0.23,0.475,0.455,0.519,1.334,0.475c1.137-0.053,2.762,0,4.484,0.068 c0,0.476-0.018,0.697-0.018,0.697c-0.111,1.299-0.697,1.342-0.93,1.342h-3.7c-0.328,0-0.602,0-0.861-0.154 c-0.309-0.18-0.43-0.772-0.541-1.78c-0.018-0.146-0.027-0.336-0.035-0.56v-0.01c0-0.068-0.008-0.154-0.008-0.25V41.58l0,0 C6.057,41.348,6.057,41.09,6.057,40.883L6.057,40.883z M49.867,32.766c0-2.642-0.344-5.224-0.482-5.507 c-0.104-0.207-0.766-0.749-2.271-1.773c-1.522-1.042-1.487-0.887-1.766-1.566c0.25-0.078,0.492-0.224,0.639-0.241 c0.326-0.034,0.345,0.274,1.023,0.274c0.68,0,2.152-0.18,2.453-0.48c0.301-0.303,0.396-0.405,0.396-0.672 c0-0.268-0.156-0.818-0.447-1.146c-0.293-0.327-1.541-0.49-2.273-0.585c-0.729-0.095-0.834,0-1.022,0.121 c-0.304,0.189-0.32,1.919-0.32,1.919l-0.713,0.018c-0.465-1.146-1.11-3.452-2.117-5.269c-1.103-1.979-2.256-2.599-2.737-2.754 c-0.474-0.146-0.904-0.249-4.131-0.576c-3.298-0.344-5.922-0.388-8.262-0.388c-2.342,0-4.967,0.052-8.264,0.388 c-3.229,0.336-3.66,0.43-4.133,0.576s-1.633,0.775-2.736,2.754c-1.006,1.816-1.652,4.123-2.117,5.269L9.87,23.109 c0,0-0.008-1.729-0.318-1.919c-0.189-0.121-0.293-0.225-1.023-0.121c-0.732,0.104-1.98,0.258-2.273,0.585 c-0.293,0.327-0.447,0.878-0.447,1.146c0,0.267,0.094,0.379,0.396,0.672c0.301,0.301,1.773,0.48,2.453,0.48 c0.68,0,0.697-0.309,1.023-0.274c0.146,0.018,0.396,0.163,0.637,0.241c-0.283,0.68-0.24,0.524-1.764,1.566 c-1.506,1.033-2.178,1.566-2.271,1.773c-0.139,0.283-0.482,2.865-0.482,5.508s0.189,5.02,0.189,5.86c0,0.354,0,0.976,0.076,1.565 c0.053,0.354,0.129,0.697,0.268,0.966c0.232,0.473,0.447,0.516,1.334,0.473c1.137-0.051,2.779,0,4.477,0.07 c1.135,0.043,2.297,0.086,3.33,0.11c2.582,0.051,1.826-0.379,2.928-0.36c1.102,0.016,5.447,0.196,9.424,0.196 c3.976,0,8.332-0.182,9.423-0.196c1.102-0.019,0.346,0.411,2.926,0.36c1.033-0.018,2.195-0.067,3.332-0.11 c1.695-0.062,3.348-0.121,4.477-0.07c0.886,0.043,1.103,0,1.332-0.473c0.132-0.269,0.218-0.611,0.269-0.966 c0.086-0.592,0.078-1.213,0.078-1.565C49.678,37.793,49.867,35.408,49.867,32.766L49.867,32.766z M13.219,19.735 c0.412-0.964,1.652-2.9,2.256-3.244c0.145-0.087,1.426-0.491,4.637-0.706c2.953-0.198,6.217-0.276,7.73-0.276 c1.513,0,4.777,0.078,7.729,0.276c3.201,0.215,4.502,0.611,4.639,0.706c0.775,0.533,1.842,2.28,2.256,3.244 c0.412,0.965,0.965,2.858,0.861,3.116c-0.104,0.258,0.104,0.388-1.291,0.275c-1.387-0.103-10.088-0.216-15.185-0.216 c-4.088,0-12.789,0.113-15.184,0.216c-1.395,0.104-1.188-0.018-1.291-0.275C12.254,22.593,12.805,20.708,13.219,19.735 L13.219,19.735z M16.385,30.511c-0.619,0.155-0.988,0.491-1.764,0.482c-0.775,0-2.867-0.353-3.314-0.371 c-0.447-0.017-0.842,0.302-1.076,0.362c-0.23,0.06-0.688-0.104-1.377-0.318c-0.688-0.216-1.092-0.155-1.316-1.094 c-0.232-0.93,0-2.264,0-2.264c1.488-0.068,2.928,0.069,5.621,0.826c2.693,0.758,4.191,2.213,4.191,2.213 S17.004,30.357,15.385,30.511L16.385,30.511z M36.629,37.293c-1.23,0.164-6.386,0.207-8.794,0.207c-2.412,0-7.566-0.051-8.799-0.207 c-1.256-0.164-2.891-1.67-1.764-2.865c1.523-1.627,1.24-1.576,4.701-2.023C24.967,32.018,27.239,32,27.834,32 c0.584,0,2.865,0.025,5.859,0.404c3.461,0.447,3.178,0.396,4.699,2.022C39.521,35.623,37.887,37.129,36.629,37.293L36.629,37.293z  M48.129,29.582c-0.232,0.93-0.629,0.878-1.318,1.093c-0.688,0.216-1.145,0.371-1.377,0.319c-0.231-0.053-0.627-0.371-1.074-0.361 c-0.448,0.018-2.539,0.37-3.313,0.37c-0.772,0-1.146-0.328-1.764-0.481c-0.621-0.154-0.966-0.154-0.966-0.154 s1.49-1.464,4.191-2.213c2.693-0.758,4.131-0.895,5.621-0.826C48.129,27.309,48.361,28.643,48.129,29.582L48.129,29.582z",
        },
        {
          value: 0,
          symbol:
            "path://M49.592,40.883c-0.053,0.354-0.139,0.697-0.268,0.963c-0.232,0.475-0.455,0.519-1.334,0.475 c-1.135-0.053-2.764,0-4.484,0.068c0,0.476,0.018,0.697,0.018,0.697c0.111,1.299,0.697,1.342,0.931,1.342h3.7 c0.326,0,0.628,0,0.861-0.154c0.301-0.196,0.43-0.772,0.543-1.78c0.017-0.146,0.025-0.336,0.033-0.56v-0.01 c0-0.068,0.008-0.154,0.008-0.25V41.58l0,0C49.6,41.348,49.6,41.09,49.592,40.883L49.592,40.883z M6.057,40.883 c0.053,0.354,0.137,0.697,0.268,0.963c0.23,0.475,0.455,0.519,1.334,0.475c1.137-0.053,2.762,0,4.484,0.068 c0,0.476-0.018,0.697-0.018,0.697c-0.111,1.299-0.697,1.342-0.93,1.342h-3.7c-0.328,0-0.602,0-0.861-0.154 c-0.309-0.18-0.43-0.772-0.541-1.78c-0.018-0.146-0.027-0.336-0.035-0.56v-0.01c0-0.068-0.008-0.154-0.008-0.25V41.58l0,0 C6.057,41.348,6.057,41.09,6.057,40.883L6.057,40.883z M49.867,32.766c0-2.642-0.344-5.224-0.482-5.507 c-0.104-0.207-0.766-0.749-2.271-1.773c-1.522-1.042-1.487-0.887-1.766-1.566c0.25-0.078,0.492-0.224,0.639-0.241 c0.326-0.034,0.345,0.274,1.023,0.274c0.68,0,2.152-0.18,2.453-0.48c0.301-0.303,0.396-0.405,0.396-0.672 c0-0.268-0.156-0.818-0.447-1.146c-0.293-0.327-1.541-0.49-2.273-0.585c-0.729-0.095-0.834,0-1.022,0.121 c-0.304,0.189-0.32,1.919-0.32,1.919l-0.713,0.018c-0.465-1.146-1.11-3.452-2.117-5.269c-1.103-1.979-2.256-2.599-2.737-2.754 c-0.474-0.146-0.904-0.249-4.131-0.576c-3.298-0.344-5.922-0.388-8.262-0.388c-2.342,0-4.967,0.052-8.264,0.388 c-3.229,0.336-3.66,0.43-4.133,0.576s-1.633,0.775-2.736,2.754c-1.006,1.816-1.652,4.123-2.117,5.269L9.87,23.109 c0,0-0.008-1.729-0.318-1.919c-0.189-0.121-0.293-0.225-1.023-0.121c-0.732,0.104-1.98,0.258-2.273,0.585 c-0.293,0.327-0.447,0.878-0.447,1.146c0,0.267,0.094,0.379,0.396,0.672c0.301,0.301,1.773,0.48,2.453,0.48 c0.68,0,0.697-0.309,1.023-0.274c0.146,0.018,0.396,0.163,0.637,0.241c-0.283,0.68-0.24,0.524-1.764,1.566 c-1.506,1.033-2.178,1.566-2.271,1.773c-0.139,0.283-0.482,2.865-0.482,5.508s0.189,5.02,0.189,5.86c0,0.354,0,0.976,0.076,1.565 c0.053,0.354,0.129,0.697,0.268,0.966c0.232,0.473,0.447,0.516,1.334,0.473c1.137-0.051,2.779,0,4.477,0.07 c1.135,0.043,2.297,0.086,3.33,0.11c2.582,0.051,1.826-0.379,2.928-0.36c1.102,0.016,5.447,0.196,9.424,0.196 c3.976,0,8.332-0.182,9.423-0.196c1.102-0.019,0.346,0.411,2.926,0.36c1.033-0.018,2.195-0.067,3.332-0.11 c1.695-0.062,3.348-0.121,4.477-0.07c0.886,0.043,1.103,0,1.332-0.473c0.132-0.269,0.218-0.611,0.269-0.966 c0.086-0.592,0.078-1.213,0.078-1.565C49.678,37.793,49.867,35.408,49.867,32.766L49.867,32.766z M13.219,19.735 c0.412-0.964,1.652-2.9,2.256-3.244c0.145-0.087,1.426-0.491,4.637-0.706c2.953-0.198,6.217-0.276,7.73-0.276 c1.513,0,4.777,0.078,7.729,0.276c3.201,0.215,4.502,0.611,4.639,0.706c0.775,0.533,1.842,2.28,2.256,3.244 c0.412,0.965,0.965,2.858,0.861,3.116c-0.104,0.258,0.104,0.388-1.291,0.275c-1.387-0.103-10.088-0.216-15.185-0.216 c-4.088,0-12.789,0.113-15.184,0.216c-1.395,0.104-1.188-0.018-1.291-0.275C12.254,22.593,12.805,20.708,13.219,19.735 L13.219,19.735z M16.385,30.511c-0.619,0.155-0.988,0.491-1.764,0.482c-0.775,0-2.867-0.353-3.314-0.371 c-0.447-0.017-0.842,0.302-1.076,0.362c-0.23,0.06-0.688-0.104-1.377-0.318c-0.688-0.216-1.092-0.155-1.316-1.094 c-0.232-0.93,0-2.264,0-2.264c1.488-0.068,2.928,0.069,5.621,0.826c2.693,0.758,4.191,2.213,4.191,2.213 S17.004,30.357,15.385,30.511L16.385,30.511z M36.629,37.293c-1.23,0.164-6.386,0.207-8.794,0.207c-2.412,0-7.566-0.051-8.799-0.207 c-1.256-0.164-2.891-1.67-1.764-2.865c1.523-1.627,1.24-1.576,4.701-2.023C24.967,32.018,27.239,32,27.834,32 c0.584,0,2.865,0.025,5.859,0.404c3.461,0.447,3.178,0.396,4.699,2.022C39.521,35.623,37.887,37.129,36.629,37.293L36.629,37.293z  M48.129,29.582c-0.232,0.93-0.629,0.878-1.318,1.093c-0.688,0.216-1.145,0.371-1.377,0.319c-0.231-0.053-0.627-0.371-1.074-0.361 c-0.448,0.018-2.539,0.37-3.313,0.37c-0.772,0-1.146-0.328-1.764-0.481c-0.621-0.154-0.966-0.154-0.966-0.154 s1.49-1.464,4.191-2.213c2.693-0.758,4.131-0.895,5.621-0.826C48.129,27.309,48.361,28.643,48.129,29.582L48.129,29.582z",
        },
        {
          value: 0,
          symbol:
            "path://M49.592,40.883c-0.053,0.354-0.139,0.697-0.268,0.963c-0.232,0.475-0.455,0.519-1.334,0.475 c-1.135-0.053-2.764,0-4.484,0.068c0,0.476,0.018,0.697,0.018,0.697c0.111,1.299,0.697,1.342,0.931,1.342h3.7 c0.326,0,0.628,0,0.861-0.154c0.301-0.196,0.43-0.772,0.543-1.78c0.017-0.146,0.025-0.336,0.033-0.56v-0.01 c0-0.068,0.008-0.154,0.008-0.25V41.58l0,0C49.6,41.348,49.6,41.09,49.592,40.883L49.592,40.883z M6.057,40.883 c0.053,0.354,0.137,0.697,0.268,0.963c0.23,0.475,0.455,0.519,1.334,0.475c1.137-0.053,2.762,0,4.484,0.068 c0,0.476-0.018,0.697-0.018,0.697c-0.111,1.299-0.697,1.342-0.93,1.342h-3.7c-0.328,0-0.602,0-0.861-0.154 c-0.309-0.18-0.43-0.772-0.541-1.78c-0.018-0.146-0.027-0.336-0.035-0.56v-0.01c0-0.068-0.008-0.154-0.008-0.25V41.58l0,0 C6.057,41.348,6.057,41.09,6.057,40.883L6.057,40.883z M49.867,32.766c0-2.642-0.344-5.224-0.482-5.507 c-0.104-0.207-0.766-0.749-2.271-1.773c-1.522-1.042-1.487-0.887-1.766-1.566c0.25-0.078,0.492-0.224,0.639-0.241 c0.326-0.034,0.345,0.274,1.023,0.274c0.68,0,2.152-0.18,2.453-0.48c0.301-0.303,0.396-0.405,0.396-0.672 c0-0.268-0.156-0.818-0.447-1.146c-0.293-0.327-1.541-0.49-2.273-0.585c-0.729-0.095-0.834,0-1.022,0.121 c-0.304,0.189-0.32,1.919-0.32,1.919l-0.713,0.018c-0.465-1.146-1.11-3.452-2.117-5.269c-1.103-1.979-2.256-2.599-2.737-2.754 c-0.474-0.146-0.904-0.249-4.131-0.576c-3.298-0.344-5.922-0.388-8.262-0.388c-2.342,0-4.967,0.052-8.264,0.388 c-3.229,0.336-3.66,0.43-4.133,0.576s-1.633,0.775-2.736,2.754c-1.006,1.816-1.652,4.123-2.117,5.269L9.87,23.109 c0,0-0.008-1.729-0.318-1.919c-0.189-0.121-0.293-0.225-1.023-0.121c-0.732,0.104-1.98,0.258-2.273,0.585 c-0.293,0.327-0.447,0.878-0.447,1.146c0,0.267,0.094,0.379,0.396,0.672c0.301,0.301,1.773,0.48,2.453,0.48 c0.68,0,0.697-0.309,1.023-0.274c0.146,0.018,0.396,0.163,0.637,0.241c-0.283,0.68-0.24,0.524-1.764,1.566 c-1.506,1.033-2.178,1.566-2.271,1.773c-0.139,0.283-0.482,2.865-0.482,5.508s0.189,5.02,0.189,5.86c0,0.354,0,0.976,0.076,1.565 c0.053,0.354,0.129,0.697,0.268,0.966c0.232,0.473,0.447,0.516,1.334,0.473c1.137-0.051,2.779,0,4.477,0.07 c1.135,0.043,2.297,0.086,3.33,0.11c2.582,0.051,1.826-0.379,2.928-0.36c1.102,0.016,5.447,0.196,9.424,0.196 c3.976,0,8.332-0.182,9.423-0.196c1.102-0.019,0.346,0.411,2.926,0.36c1.033-0.018,2.195-0.067,3.332-0.11 c1.695-0.062,3.348-0.121,4.477-0.07c0.886,0.043,1.103,0,1.332-0.473c0.132-0.269,0.218-0.611,0.269-0.966 c0.086-0.592,0.078-1.213,0.078-1.565C49.678,37.793,49.867,35.408,49.867,32.766L49.867,32.766z M13.219,19.735 c0.412-0.964,1.652-2.9,2.256-3.244c0.145-0.087,1.426-0.491,4.637-0.706c2.953-0.198,6.217-0.276,7.73-0.276 c1.513,0,4.777,0.078,7.729,0.276c3.201,0.215,4.502,0.611,4.639,0.706c0.775,0.533,1.842,2.28,2.256,3.244 c0.412,0.965,0.965,2.858,0.861,3.116c-0.104,0.258,0.104,0.388-1.291,0.275c-1.387-0.103-10.088-0.216-15.185-0.216 c-4.088,0-12.789,0.113-15.184,0.216c-1.395,0.104-1.188-0.018-1.291-0.275C12.254,22.593,12.805,20.708,13.219,19.735 L13.219,19.735z M16.385,30.511c-0.619,0.155-0.988,0.491-1.764,0.482c-0.775,0-2.867-0.353-3.314-0.371 c-0.447-0.017-0.842,0.302-1.076,0.362c-0.23,0.06-0.688-0.104-1.377-0.318c-0.688-0.216-1.092-0.155-1.316-1.094 c-0.232-0.93,0-2.264,0-2.264c1.488-0.068,2.928,0.069,5.621,0.826c2.693,0.758,4.191,2.213,4.191,2.213 S17.004,30.357,15.385,30.511L16.385,30.511z M36.629,37.293c-1.23,0.164-6.386,0.207-8.794,0.207c-2.412,0-7.566-0.051-8.799-0.207 c-1.256-0.164-2.891-1.67-1.764-2.865c1.523-1.627,1.24-1.576,4.701-2.023C24.967,32.018,27.239,32,27.834,32 c0.584,0,2.865,0.025,5.859,0.404c3.461,0.447,3.178,0.396,4.699,2.022C39.521,35.623,37.887,37.129,36.629,37.293L36.629,37.293z  M48.129,29.582c-0.232,0.93-0.629,0.878-1.318,1.093c-0.688,0.216-1.145,0.371-1.377,0.319c-0.231-0.053-0.627-0.371-1.074-0.361 c-0.448,0.018-2.539,0.37-3.313,0.37c-0.772,0-1.146-0.328-1.764-0.481c-0.621-0.154-0.966-0.154-0.966-0.154 s1.49-1.464,4.191-2.213c2.693-0.758,4.131-0.895,5.621-0.826C48.129,27.309,48.361,28.643,48.129,29.582L48.129,29.582z",
        },
        {
          value: 0,
          symbol:
            "path://M49.592,40.883c-0.053,0.354-0.139,0.697-0.268,0.963c-0.232,0.475-0.455,0.519-1.334,0.475 c-1.135-0.053-2.764,0-4.484,0.068c0,0.476,0.018,0.697,0.018,0.697c0.111,1.299,0.697,1.342,0.931,1.342h3.7 c0.326,0,0.628,0,0.861-0.154c0.301-0.196,0.43-0.772,0.543-1.78c0.017-0.146,0.025-0.336,0.033-0.56v-0.01 c0-0.068,0.008-0.154,0.008-0.25V41.58l0,0C49.6,41.348,49.6,41.09,49.592,40.883L49.592,40.883z M6.057,40.883 c0.053,0.354,0.137,0.697,0.268,0.963c0.23,0.475,0.455,0.519,1.334,0.475c1.137-0.053,2.762,0,4.484,0.068 c0,0.476-0.018,0.697-0.018,0.697c-0.111,1.299-0.697,1.342-0.93,1.342h-3.7c-0.328,0-0.602,0-0.861-0.154 c-0.309-0.18-0.43-0.772-0.541-1.78c-0.018-0.146-0.027-0.336-0.035-0.56v-0.01c0-0.068-0.008-0.154-0.008-0.25V41.58l0,0 C6.057,41.348,6.057,41.09,6.057,40.883L6.057,40.883z M49.867,32.766c0-2.642-0.344-5.224-0.482-5.507 c-0.104-0.207-0.766-0.749-2.271-1.773c-1.522-1.042-1.487-0.887-1.766-1.566c0.25-0.078,0.492-0.224,0.639-0.241 c0.326-0.034,0.345,0.274,1.023,0.274c0.68,0,2.152-0.18,2.453-0.48c0.301-0.303,0.396-0.405,0.396-0.672 c0-0.268-0.156-0.818-0.447-1.146c-0.293-0.327-1.541-0.49-2.273-0.585c-0.729-0.095-0.834,0-1.022,0.121 c-0.304,0.189-0.32,1.919-0.32,1.919l-0.713,0.018c-0.465-1.146-1.11-3.452-2.117-5.269c-1.103-1.979-2.256-2.599-2.737-2.754 c-0.474-0.146-0.904-0.249-4.131-0.576c-3.298-0.344-5.922-0.388-8.262-0.388c-2.342,0-4.967,0.052-8.264,0.388 c-3.229,0.336-3.66,0.43-4.133,0.576s-1.633,0.775-2.736,2.754c-1.006,1.816-1.652,4.123-2.117,5.269L9.87,23.109 c0,0-0.008-1.729-0.318-1.919c-0.189-0.121-0.293-0.225-1.023-0.121c-0.732,0.104-1.98,0.258-2.273,0.585 c-0.293,0.327-0.447,0.878-0.447,1.146c0,0.267,0.094,0.379,0.396,0.672c0.301,0.301,1.773,0.48,2.453,0.48 c0.68,0,0.697-0.309,1.023-0.274c0.146,0.018,0.396,0.163,0.637,0.241c-0.283,0.68-0.24,0.524-1.764,1.566 c-1.506,1.033-2.178,1.566-2.271,1.773c-0.139,0.283-0.482,2.865-0.482,5.508s0.189,5.02,0.189,5.86c0,0.354,0,0.976,0.076,1.565 c0.053,0.354,0.129,0.697,0.268,0.966c0.232,0.473,0.447,0.516,1.334,0.473c1.137-0.051,2.779,0,4.477,0.07 c1.135,0.043,2.297,0.086,3.33,0.11c2.582,0.051,1.826-0.379,2.928-0.36c1.102,0.016,5.447,0.196,9.424,0.196 c3.976,0,8.332-0.182,9.423-0.196c1.102-0.019,0.346,0.411,2.926,0.36c1.033-0.018,2.195-0.067,3.332-0.11 c1.695-0.062,3.348-0.121,4.477-0.07c0.886,0.043,1.103,0,1.332-0.473c0.132-0.269,0.218-0.611,0.269-0.966 c0.086-0.592,0.078-1.213,0.078-1.565C49.678,37.793,49.867,35.408,49.867,32.766L49.867,32.766z M13.219,19.735 c0.412-0.964,1.652-2.9,2.256-3.244c0.145-0.087,1.426-0.491,4.637-0.706c2.953-0.198,6.217-0.276,7.73-0.276 c1.513,0,4.777,0.078,7.729,0.276c3.201,0.215,4.502,0.611,4.639,0.706c0.775,0.533,1.842,2.28,2.256,3.244 c0.412,0.965,0.965,2.858,0.861,3.116c-0.104,0.258,0.104,0.388-1.291,0.275c-1.387-0.103-10.088-0.216-15.185-0.216 c-4.088,0-12.789,0.113-15.184,0.216c-1.395,0.104-1.188-0.018-1.291-0.275C12.254,22.593,12.805,20.708,13.219,19.735 L13.219,19.735z M16.385,30.511c-0.619,0.155-0.988,0.491-1.764,0.482c-0.775,0-2.867-0.353-3.314-0.371 c-0.447-0.017-0.842,0.302-1.076,0.362c-0.23,0.06-0.688-0.104-1.377-0.318c-0.688-0.216-1.092-0.155-1.316-1.094 c-0.232-0.93,0-2.264,0-2.264c1.488-0.068,2.928,0.069,5.621,0.826c2.693,0.758,4.191,2.213,4.191,2.213 S17.004,30.357,15.385,30.511L16.385,30.511z M36.629,37.293c-1.23,0.164-6.386,0.207-8.794,0.207c-2.412,0-7.566-0.051-8.799-0.207 c-1.256-0.164-2.891-1.67-1.764-2.865c1.523-1.627,1.24-1.576,4.701-2.023C24.967,32.018,27.239,32,27.834,32 c0.584,0,2.865,0.025,5.859,0.404c3.461,0.447,3.178,0.396,4.699,2.022C39.521,35.623,37.887,37.129,36.629,37.293L36.629,37.293z  M48.129,29.582c-0.232,0.93-0.629,0.878-1.318,1.093c-0.688,0.216-1.145,0.371-1.377,0.319c-0.231-0.053-0.627-0.371-1.074-0.361 c-0.448,0.018-2.539,0.37-3.313,0.37c-0.772,0-1.146-0.328-1.764-0.481c-0.621-0.154-0.966-0.154-0.966-0.154 s1.49-1.464,4.191-2.213c2.693-0.758,4.131-0.895,5.621-0.826C48.129,27.309,48.361,28.643,48.129,29.582L48.129,29.582z",
        },
        {
          value: 0,
          symbol:
            "path://M49.592,40.883c-0.053,0.354-0.139,0.697-0.268,0.963c-0.232,0.475-0.455,0.519-1.334,0.475 c-1.135-0.053-2.764,0-4.484,0.068c0,0.476,0.018,0.697,0.018,0.697c0.111,1.299,0.697,1.342,0.931,1.342h3.7 c0.326,0,0.628,0,0.861-0.154c0.301-0.196,0.43-0.772,0.543-1.78c0.017-0.146,0.025-0.336,0.033-0.56v-0.01 c0-0.068,0.008-0.154,0.008-0.25V41.58l0,0C49.6,41.348,49.6,41.09,49.592,40.883L49.592,40.883z M6.057,40.883 c0.053,0.354,0.137,0.697,0.268,0.963c0.23,0.475,0.455,0.519,1.334,0.475c1.137-0.053,2.762,0,4.484,0.068 c0,0.476-0.018,0.697-0.018,0.697c-0.111,1.299-0.697,1.342-0.93,1.342h-3.7c-0.328,0-0.602,0-0.861-0.154 c-0.309-0.18-0.43-0.772-0.541-1.78c-0.018-0.146-0.027-0.336-0.035-0.56v-0.01c0-0.068-0.008-0.154-0.008-0.25V41.58l0,0 C6.057,41.348,6.057,41.09,6.057,40.883L6.057,40.883z M49.867,32.766c0-2.642-0.344-5.224-0.482-5.507 c-0.104-0.207-0.766-0.749-2.271-1.773c-1.522-1.042-1.487-0.887-1.766-1.566c0.25-0.078,0.492-0.224,0.639-0.241 c0.326-0.034,0.345,0.274,1.023,0.274c0.68,0,2.152-0.18,2.453-0.48c0.301-0.303,0.396-0.405,0.396-0.672 c0-0.268-0.156-0.818-0.447-1.146c-0.293-0.327-1.541-0.49-2.273-0.585c-0.729-0.095-0.834,0-1.022,0.121 c-0.304,0.189-0.32,1.919-0.32,1.919l-0.713,0.018c-0.465-1.146-1.11-3.452-2.117-5.269c-1.103-1.979-2.256-2.599-2.737-2.754 c-0.474-0.146-0.904-0.249-4.131-0.576c-3.298-0.344-5.922-0.388-8.262-0.388c-2.342,0-4.967,0.052-8.264,0.388 c-3.229,0.336-3.66,0.43-4.133,0.576s-1.633,0.775-2.736,2.754c-1.006,1.816-1.652,4.123-2.117,5.269L9.87,23.109 c0,0-0.008-1.729-0.318-1.919c-0.189-0.121-0.293-0.225-1.023-0.121c-0.732,0.104-1.98,0.258-2.273,0.585 c-0.293,0.327-0.447,0.878-0.447,1.146c0,0.267,0.094,0.379,0.396,0.672c0.301,0.301,1.773,0.48,2.453,0.48 c0.68,0,0.697-0.309,1.023-0.274c0.146,0.018,0.396,0.163,0.637,0.241c-0.283,0.68-0.24,0.524-1.764,1.566 c-1.506,1.033-2.178,1.566-2.271,1.773c-0.139,0.283-0.482,2.865-0.482,5.508s0.189,5.02,0.189,5.86c0,0.354,0,0.976,0.076,1.565 c0.053,0.354,0.129,0.697,0.268,0.966c0.232,0.473,0.447,0.516,1.334,0.473c1.137-0.051,2.779,0,4.477,0.07 c1.135,0.043,2.297,0.086,3.33,0.11c2.582,0.051,1.826-0.379,2.928-0.36c1.102,0.016,5.447,0.196,9.424,0.196 c3.976,0,8.332-0.182,9.423-0.196c1.102-0.019,0.346,0.411,2.926,0.36c1.033-0.018,2.195-0.067,3.332-0.11 c1.695-0.062,3.348-0.121,4.477-0.07c0.886,0.043,1.103,0,1.332-0.473c0.132-0.269,0.218-0.611,0.269-0.966 c0.086-0.592,0.078-1.213,0.078-1.565C49.678,37.793,49.867,35.408,49.867,32.766L49.867,32.766z M13.219,19.735 c0.412-0.964,1.652-2.9,2.256-3.244c0.145-0.087,1.426-0.491,4.637-0.706c2.953-0.198,6.217-0.276,7.73-0.276 c1.513,0,4.777,0.078,7.729,0.276c3.201,0.215,4.502,0.611,4.639,0.706c0.775,0.533,1.842,2.28,2.256,3.244 c0.412,0.965,0.965,2.858,0.861,3.116c-0.104,0.258,0.104,0.388-1.291,0.275c-1.387-0.103-10.088-0.216-15.185-0.216 c-4.088,0-12.789,0.113-15.184,0.216c-1.395,0.104-1.188-0.018-1.291-0.275C12.254,22.593,12.805,20.708,13.219,19.735 L13.219,19.735z M16.385,30.511c-0.619,0.155-0.988,0.491-1.764,0.482c-0.775,0-2.867-0.353-3.314-0.371 c-0.447-0.017-0.842,0.302-1.076,0.362c-0.23,0.06-0.688-0.104-1.377-0.318c-0.688-0.216-1.092-0.155-1.316-1.094 c-0.232-0.93,0-2.264,0-2.264c1.488-0.068,2.928,0.069,5.621,0.826c2.693,0.758,4.191,2.213,4.191,2.213 S17.004,30.357,15.385,30.511L16.385,30.511z M36.629,37.293c-1.23,0.164-6.386,0.207-8.794,0.207c-2.412,0-7.566-0.051-8.799-0.207 c-1.256-0.164-2.891-1.67-1.764-2.865c1.523-1.627,1.24-1.576,4.701-2.023C24.967,32.018,27.239,32,27.834,32 c0.584,0,2.865,0.025,5.859,0.404c3.461,0.447,3.178,0.396,4.699,2.022C39.521,35.623,37.887,37.129,36.629,37.293L36.629,37.293z  M48.129,29.582c-0.232,0.93-0.629,0.878-1.318,1.093c-0.688,0.216-1.145,0.371-1.377,0.319c-0.231-0.053-0.627-0.371-1.074-0.361 c-0.448,0.018-2.539,0.37-3.313,0.37c-0.772,0-1.146-0.328-1.764-0.481c-0.621-0.154-0.966-0.154-0.966-0.154 s1.49-1.464,4.191-2.213c2.693-0.758,4.131-0.895,5.621-0.826C48.129,27.309,48.361,28.643,48.129,29.582L48.129,29.582z",
        },
        {
          value: 0,
          symbol:
            "path://M49.592,40.883c-0.053,0.354-0.139,0.697-0.268,0.963c-0.232,0.475-0.455,0.519-1.334,0.475 c-1.135-0.053-2.764,0-4.484,0.068c0,0.476,0.018,0.697,0.018,0.697c0.111,1.299,0.697,1.342,0.931,1.342h3.7 c0.326,0,0.628,0,0.861-0.154c0.301-0.196,0.43-0.772,0.543-1.78c0.017-0.146,0.025-0.336,0.033-0.56v-0.01 c0-0.068,0.008-0.154,0.008-0.25V41.58l0,0C49.6,41.348,49.6,41.09,49.592,40.883L49.592,40.883z M6.057,40.883 c0.053,0.354,0.137,0.697,0.268,0.963c0.23,0.475,0.455,0.519,1.334,0.475c1.137-0.053,2.762,0,4.484,0.068 c0,0.476-0.018,0.697-0.018,0.697c-0.111,1.299-0.697,1.342-0.93,1.342h-3.7c-0.328,0-0.602,0-0.861-0.154 c-0.309-0.18-0.43-0.772-0.541-1.78c-0.018-0.146-0.027-0.336-0.035-0.56v-0.01c0-0.068-0.008-0.154-0.008-0.25V41.58l0,0 C6.057,41.348,6.057,41.09,6.057,40.883L6.057,40.883z M49.867,32.766c0-2.642-0.344-5.224-0.482-5.507 c-0.104-0.207-0.766-0.749-2.271-1.773c-1.522-1.042-1.487-0.887-1.766-1.566c0.25-0.078,0.492-0.224,0.639-0.241 c0.326-0.034,0.345,0.274,1.023,0.274c0.68,0,2.152-0.18,2.453-0.48c0.301-0.303,0.396-0.405,0.396-0.672 c0-0.268-0.156-0.818-0.447-1.146c-0.293-0.327-1.541-0.49-2.273-0.585c-0.729-0.095-0.834,0-1.022,0.121 c-0.304,0.189-0.32,1.919-0.32,1.919l-0.713,0.018c-0.465-1.146-1.11-3.452-2.117-5.269c-1.103-1.979-2.256-2.599-2.737-2.754 c-0.474-0.146-0.904-0.249-4.131-0.576c-3.298-0.344-5.922-0.388-8.262-0.388c-2.342,0-4.967,0.052-8.264,0.388 c-3.229,0.336-3.66,0.43-4.133,0.576s-1.633,0.775-2.736,2.754c-1.006,1.816-1.652,4.123-2.117,5.269L9.87,23.109 c0,0-0.008-1.729-0.318-1.919c-0.189-0.121-0.293-0.225-1.023-0.121c-0.732,0.104-1.98,0.258-2.273,0.585 c-0.293,0.327-0.447,0.878-0.447,1.146c0,0.267,0.094,0.379,0.396,0.672c0.301,0.301,1.773,0.48,2.453,0.48 c0.68,0,0.697-0.309,1.023-0.274c0.146,0.018,0.396,0.163,0.637,0.241c-0.283,0.68-0.24,0.524-1.764,1.566 c-1.506,1.033-2.178,1.566-2.271,1.773c-0.139,0.283-0.482,2.865-0.482,5.508s0.189,5.02,0.189,5.86c0,0.354,0,0.976,0.076,1.565 c0.053,0.354,0.129,0.697,0.268,0.966c0.232,0.473,0.447,0.516,1.334,0.473c1.137-0.051,2.779,0,4.477,0.07 c1.135,0.043,2.297,0.086,3.33,0.11c2.582,0.051,1.826-0.379,2.928-0.36c1.102,0.016,5.447,0.196,9.424,0.196 c3.976,0,8.332-0.182,9.423-0.196c1.102-0.019,0.346,0.411,2.926,0.36c1.033-0.018,2.195-0.067,3.332-0.11 c1.695-0.062,3.348-0.121,4.477-0.07c0.886,0.043,1.103,0,1.332-0.473c0.132-0.269,0.218-0.611,0.269-0.966 c0.086-0.592,0.078-1.213,0.078-1.565C49.678,37.793,49.867,35.408,49.867,32.766L49.867,32.766z M13.219,19.735 c0.412-0.964,1.652-2.9,2.256-3.244c0.145-0.087,1.426-0.491,4.637-0.706c2.953-0.198,6.217-0.276,7.73-0.276 c1.513,0,4.777,0.078,7.729,0.276c3.201,0.215,4.502,0.611,4.639,0.706c0.775,0.533,1.842,2.28,2.256,3.244 c0.412,0.965,0.965,2.858,0.861,3.116c-0.104,0.258,0.104,0.388-1.291,0.275c-1.387-0.103-10.088-0.216-15.185-0.216 c-4.088,0-12.789,0.113-15.184,0.216c-1.395,0.104-1.188-0.018-1.291-0.275C12.254,22.593,12.805,20.708,13.219,19.735 L13.219,19.735z M16.385,30.511c-0.619,0.155-0.988,0.491-1.764,0.482c-0.775,0-2.867-0.353-3.314-0.371 c-0.447-0.017-0.842,0.302-1.076,0.362c-0.23,0.06-0.688-0.104-1.377-0.318c-0.688-0.216-1.092-0.155-1.316-1.094 c-0.232-0.93,0-2.264,0-2.264c1.488-0.068,2.928,0.069,5.621,0.826c2.693,0.758,4.191,2.213,4.191,2.213 S17.004,30.357,15.385,30.511L16.385,30.511z M36.629,37.293c-1.23,0.164-6.386,0.207-8.794,0.207c-2.412,0-7.566-0.051-8.799-0.207 c-1.256-0.164-2.891-1.67-1.764-2.865c1.523-1.627,1.24-1.576,4.701-2.023C24.967,32.018,27.239,32,27.834,32 c0.584,0,2.865,0.025,5.859,0.404c3.461,0.447,3.178,0.396,4.699,2.022C39.521,35.623,37.887,37.129,36.629,37.293L36.629,37.293z  M48.129,29.582c-0.232,0.93-0.629,0.878-1.318,1.093c-0.688,0.216-1.145,0.371-1.377,0.319c-0.231-0.053-0.627-0.371-1.074-0.361 c-0.448,0.018-2.539,0.37-3.313,0.37c-0.772,0-1.146-0.328-1.764-0.481c-0.621-0.154-0.966-0.154-0.966-0.154 s1.49-1.464,4.191-2.213c2.693-0.758,4.131-0.895,5.621-0.826C48.129,27.309,48.361,28.643,48.129,29.582L48.129,29.582z",
        },
      ],
    },
  ],
};

const tableData = ref([]);
const releaseStatus = reactive({
  complete: true,
  startTime: "",
  confirm: false,
  confirmTime: "",
  terminal: "",
  type: "",
  total: 0,
  out: 0,
  in: 0,
});
const client = new Connector(
  (frame) => {
    let fme_data = JSON.parse(frame.body);
    console.log(fme_data.type, fme_data.mark, fme_data.data);
    switchData(fme_data.type, fme_data.mark, fme_data.data);
  },
  (frame) => {
    console.log(frame);
  }
);

onMounted(() => {
  init();
  func_no.value = localStorage.getItem('func_no');
});

onBeforeUnmount(() => {
  client.offLine();
  clearTimeout(timer);
});

watch(taxiData, (taxiData) => {
  optionPoolT1.series[0].data = [taxiData.pool.T1.num];
  optionPoolT1.series[1].data = [taxiDataComputed.value.poolT1Remaining];
  optionPoolT2.series[0].data = [taxiData.pool.T2.num];
  optionPoolT2.series[1].data = [taxiDataComputed.value.poolT2Remaining];
  optionDashbd.series[0].data[0].value = taxiDataComputed.value.poolTotal;
  optionDashbd.series[1].data[0].value = taxiDataComputed.value.poolTotal;
  optionOnroad.series[0].data = [
    taxiData.onRoad.T1.long,
    taxiData.onRoad.T1.pd,
    taxiData.onRoad.T2.long,
    taxiData.onRoad.T2.pd,
  ];
  optionOnroad.title.text =
    "路途车辆" + ": " + taxiDataComputed.value.onWayTotal + "辆";
  optionTermnl.series[0].data[0].value = taxiData.terminal.T1.pd.line1;
  optionTermnl.series[0].data[1].value = taxiData.terminal.T1.long.line1;
  optionTermnl.series[0].data[2].value = taxiData.terminal.T1.long.line2;
  optionTermnl.series[0].data[3].value = taxiData.terminal.T2.long.line1;
  optionTermnl.series[0].data[4].value = taxiData.terminal.T2.long.line2;
  optionTermnl.series[0].data[5].value = taxiData.terminal.T2.pd.line1;
  update();
});

async function init() {
  releaseStatus.confirm = false;
  await axios.get("/api/get_taxi_num").then((res) => {
    let data = res.data;
    console.log(data);
    switchData("web", "status_num", data);
    echartT1Pool = echarts.init(containerPoolT1.value);
    echartT2Pool = echarts.init(containerPoolT2.value);
    echartDashbd = echarts.init(containerDashbd.value);
    echartOnroad = echarts.init(containerOnroad.value);
    echartTermnl = echarts.init(containerTermnl.value);
    update();
    client.connect();
  });
  await axios.get("/api/get_b_config").then((res) => {
    console.log(res.data);
    tableData.value = res.data;
    console.log(tableData);
  });
  getBatch();
}

async function getBatch() {
  await axios.get("/api/get_batch").then((res) => {
    let data = res.data;
    console.log(data);
    if (data.length) {
      releaseStatus.complete = false;
      releaseStatus.startTime = data[0].START_TIME;
      releaseStatus.terminal = data[0].TERMINAL;
      releaseStatus.type = data[0].TYPE;
      releaseStatus.total = data[0].NUM;
      releaseStatus.out = data[0].OUT_NUM;
      releaseStatus.in = data[0].POOL_NUM;
      setAudioParams(data[0].TERMINAL, data[0].TYPE, data[0].POOL_NUM);

      // let timestamp =
      //   new dayjs(data[0].START_TIME).valueOf() +
      //   Math.floor(Math.random() * 10000);
      // releaseStatus.confirm = true;
      // releaseStatus.confirmTime = dayjs(timestamp).format(
      //   "YYYY-MM-DD HH:mm:ss"
      // );
      btnDisabled.value = false;
    } else {
      btnDisabled.value = true;
      releaseStatus.confirm = false;
      releaseStatus.complete = true;
    }
  });
}

const confirmBatch = async () => {
  await axios
    .post("/api/confirm", {
      user: "xxx",
    })
    .then((res) => {
      console.log(res.data);
      btnDisabled.value = true;
    });
};

const endBatch = async () => {
  await axios.post("/api/end_batch").then((res) => {
    if (res.data == "success") {
      releaseStatus.complete = true;
      playAudio();
    }
  });
};

function switchData(type, mark, data) {
  console.log(type, mark, data);
  switch (type) {
    case "warning":
      switch (mark) {
        case "confirm":
          releaseStatus.confirm = true;
          releaseStatus.confirmTime = data[0].time;
          let params = {
            terminal: releaseStatus.terminal,
            type: releaseStatus.type,
            num: releaseStatus.in,
          }
          playAudio(params);
          break;
        default:
          break;
      }
      break;
    case "web":
      switch (mark) {
        case "status_num":
          data.forEach((item, index) => {
            switch (typeof item.ID !== "undefined" ? item.ID : item.id) {
              case "pdT1":
                taxiData.pd.T1.num = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              case "pdT2":
                taxiData.pd.T2.num = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              case "poolT1":
                taxiData.pool.T1.num = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              case "poolT2":
                taxiData.pool.T2.num = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              case "wayT1long":
                taxiData.onRoad.T1.long = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              case "wayT2long":
                taxiData.onRoad.T2.long = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              case "wayT1pd":
                taxiData.onRoad.T1.pd = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              case "wayT2pd":
                taxiData.onRoad.T2.pd = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              case "terminalT1long1":
                taxiData.terminal.T1.long.line1 = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              case "terminalT1long2":
                taxiData.terminal.T1.long.line2 = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              case "terminalT1pd1":
                taxiData.terminal.T1.pd.line1 = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              case "terminalT2long1":
                taxiData.terminal.T2.long.line1 = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              case "terminalT2long2":
                taxiData.terminal.T2.long.line2 = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              case "terminalT2pd1":
                taxiData.terminal.T2.pd.line1 = typeof item.NUM !== "undefined" ? item.NUM : item.num;
                break;
              default:
                break;
            }
          });
          console.log(taxiData);
          break;
        case "pool_out_countdown":
          console.log(data);
          if (data.num) {
            releaseStatus.terminal = data.terminal;
            releaseStatus.type = data.type;
            releaseStatus.total = data.total;
            releaseStatus.out = data.total - data.num;
            releaseStatus.in = data.num;
            let params = {
              terminal: releaseStatus.terminal,
              type: releaseStatus.type,
              num: releaseStatus.in,
            }
            console.log(params)
            playAudio(params);
          } else {
            releaseStatus.complete = true;
            playAudio();
            releaseStatus.confirm = false;
          }
          break;
        case "start_batch":
          releaseStatus.complete = false;
          releaseStatus.startTime = data.starttime.split(".")[0];
          releaseStatus.terminal = data.terminal;
          releaseStatus.type = data.type;
          releaseStatus.total = data.num;
          releaseStatus.out = 0;
          releaseStatus.in = data.num;
          btnDisabled.value = false;
          console.log("releaseStatus", releaseStatus);
          break;
        case "end_batch":
          releaseStatus.complete = true;
          playAudio();
          releaseStatus.confirm = false;
          btnDisabled.value = true;
          break;
        case "once":
          let str = null;
          console.log(data);
          data.forEach((item, index) => {
            if (item.PROCESS == "terminal_in") {
              str = item.TERMINAL + " " + item.TYPE + " " + item.LINE;
              switch (str) {
                case "T2 pd 1":
                  doorStatus.T2Pd1 = item.ONCE;
                  console.log(item.ONCE);
                  break;
                case "T2 long 1":
                  doorStatus.T2Long1 = item.ONCE;
                  console.log(item.ONCE);

                  break;
                case "T2 long 2":
                  doorStatus.T2Long2 = item.ONCE;
                  console.log(item.ONCE);

                  break;
                case "T1 pd 1":
                  doorStatus.T1Pd1 = item.ONCE;
                  console.log(item.ONCE);

                  break;
                case "T1 long 1":
                  doorStatus.T1Long1 = item.ONCE;
                  console.log(item.ONCE);

                  break;
                case "T1 long 2":
                  doorStatus.T1Long2 = item.ONCE;
                  console.log(item.ONCE);

                  break;
                default:
                  break;
              }
            } else {
              //不做操作
            }
          });
          break;
        case "device":
          for (let obj in devices) {
            devices[obj].entry.tableData.length = 0;
            devices[obj].exit.tableData.length = 0;
            devices[obj].screen.tableData.length = 0;
          }
          data.forEach((item) => {
            item.IP
              ? null
              : (item.IP = item.URL.substring(item.URL.lastIndexOf("/") + 1));
            if (item.LOCATION == "T1" && item.STATUS != "success") {
              if (item.STATUS == "error") {
                devices.T1[item.GROUP].existErr = true;
              } else {
                devices.T1[item.GROUP].existErr = false;
              }
              devices.T1[item.GROUP].tableData.push(item);
            } else if (item.LOCATION == "T2" && item.STATUS != "success") {
              if (item.STATUS == "error") {
                devices.T2[item.GROUP].existErr = true;
              } else {
                devices.T2[item.GROUP].existErr = false;
              }
              devices.T2[item.GROUP].tableData.push(item);
            } else if (
              item.LOCATION == "pool" &&
              item.GROUP != "client" &&
              item.STATUS != "success"
            ) {
              if (item.STATUS == "error") {
                devices.pool[item.GROUP].existErr = true;
              } else {
                devices.pool[item.GROUP].existErr = false;
              }
              devices.pool[item.GROUP].tableData.push(item);
            } else {
              return;
            }
          });
          break;
        default:
          break;
      }
      break;
    default:
      break;
  }
}

function update() {
  echartT1Pool.setOption(optionPoolT1);
  echartT2Pool.setOption(optionPoolT2);
  echartDashbd.setOption(optionDashbd);
  echartOnroad.setOption(optionOnroad);
  echartTermnl.setOption(optionTermnl);
}
function setAudioParams(terminal, type, num) {
  audioParams = {
    terminal,
    type,
    num,
  };
  console.log("audioParams", audioParams);
}
const playAudio = (params) => {
  console.log("params", params);
  console.log("releaseStatus.confirm", releaseStatus.confirm);
  if (releaseStatus.confirm) {
    let index = 1;
    console.log("releaseStatus.complete", releaseStatus.complete);
    if (releaseStatus.complete) {
      audioSource.value = actionVoice.release_complete_audio;
      timer = setTimeout(() => {
        audio.value && audio.value.play();
        releaseStatus.confirm = false;
      }, 100);
    } else if (params.terminal == "T1") {
      audioSource.value = actionVoice.T1_come_soon_voice;
    } else {
      console.log("T2");
      if (params.type == "long") {
        // player = new Promise((resolve, reject) => {
        //   timer = setTimeout(() => {
        //     console.log("*********playAudio terminal");
        //     audio.value && audio.value.play();
        //   }, 100);
        //   audio.value.onended = () => {
        //     resolve(params.num);
        //     reject("error");
        //   }
        // });
        // player.then(value => {
        //   audioSource.value = numVoice[value];
        //   console.log("///////////", audioSource.value);
        //   timer = setTimeout(() => {
        //     console.log("*********playAudio num");
        //     audio.value && audio.value.play();
        //   }, 100);
        //   audio.value.onended = () => {
        //     audioSource.value = numVoice[0];
        //     timer = setTimeout(() => {
        //       audio.value && audio.value.play();
        //     })
        //   }
        // })
        audioSource.value = actionVoice.T2long_come_soon_voice;
      } else {
        audioSource.value = actionVoice.T2short_come_soon_voice;
      }
    }

    audio.value.onended = () => {
      if (releaseStatus.complete) {
        // 不做操作
      } else {
        switch (index) {
          case 1:
            audioSource.value = numVoice[params.num];
            timer = setTimeout(() => {
              audio.value && audio.value.play();
            }, 100);
            break;
          case 2:
            audioSource.value = numVoice[0];
            timer = setTimeout(() => {
              audio.value && audio.value.play();
            }, 100);
            break;
          default:
            break;
        }
        index++;
      }
    };
    timer = setTimeout(() => {
      console.log("********play audio");
      audio.value && audio.value.play();
    }, 100);
  } else {
    //audio.value.pause();
    //console.log("不播报语音")
  }
};
</script>

<style lang="less" scoped>
.container {
  height: 100%;

  .echart-box {
    position: relative;
    top: 0px;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 852px;

    .el-card {
      height: auto;
    }

    .el-card:nth-child(2) {
      position: relative;

      .release-box {
        position: relative;
        top: 0;
        height: 90px;

        .info-releaseStatus {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translateX(-50%) translateY(-50%);
          font-weight: 600;
          font-size: 24px;
        }

        .info-release-complete {
          text-align: center;
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translateX(-50%) translateY(-50%);

          h3,
          h4 {
            margin: 10px;
            padding: 0;
          }

          h3 {
            .el-text {
              font-size: 20px;
            }
          }

          h4:nth-of-type(1) {
            .el-text:nth-child(2) {
              font-size: 16px;
            }

            .el-text:nth-child(4) {
              font-size: 16px;
            }
          }

          h4:nth-of-type(2) {
            .el-text {
              font-size: 13px;
            }
          }
        }
      }
    }

    .el-card:nth-last-child(1) {
      position: relative;
      bottom: -3px;

      .button-box-confirm {
        text-align: center;

        .el-button:nth-last-child(1) {
          margin-left: 60px;
        }
      }
    }

    .dashbd-box {
      height: 450px;
    }

    .pool-box {
      height: 150px;
    }

    .road-box {
      height: 450px;
    }

    .terminl-box {
      position: relative;
      top: 0px;

      .button-box {
        position: relative;
        top: -2px;
        width: 100%;
        height: 450px;
        display: flex;
        flex-direction: column;
        justify-content: center;

        .el-button:nth-of-type(1) {
          margin-left: 12px;
        }

        .el-button {
          margin: 14px;
          width: 72px;
        }
      }
    }
  }

  .echart-box:nth-of-type(1) {
    position: relative;

    .echart-panle {
      position: relative;
      height: 450px;
    }

    .passcheck-box {
      height: 340px;

      .table-box {
        position: relative;
        top: 12px;
        background-color: cadetblue;
      }
    }
  }
}
</style>
